== Mappings

A list of mappings is below. Special semantics, unless otherwise noted, come from http://idpf.org/epub/vocab/structure/[EPUB 3 Structural Semantics Vocabulary]

=== Book Components

==== Book

*Legacy DB element*: <book>

*New HTML element*: <body>

*Special semantics*: +class="book"+footnote:[Not in EPUB 3 Structural Semantics Vocabulary; from DocBook]

*Example*

----
<body class="book">
  <!-- Lots of book content here -->
</body>
----

==== Chapter

*Legacy DB element*: <chapter>

*New HTML element*: <section>

*Special semantics*: +class="chapter"+ 

*Example*

----
<section class="chapter">
  <!-- h1 used for all chapter titles -->
  <h1 class="title">Chapter Title</h1>
  <!-- Lots of chapter content here -->
</section>
----

==== Appendix

*Legacy DB element*: <appendix>

*New HTML element*: <section>

*Special semantics*: +class="appendix"+ or class="afterword", depending on content

*Example*

----
<section class="appendix">
  <!-- h1 used for all appendix titles -->
  <h1 class="title">Appendix Title</h1>
  <!-- Lots of appendix content here -->
</section>
----

==== Bibliography

*Legacy DB element*: <bibliography>

*New HTML element*: <section>

*Special semantics*: +class="bibliography"+ for main bibliography; class="biblioentry" for each biblioentry

*Example*

----
<section class="bibliography">
  <!-- optional h1 used for all bibliography titles -->
  <h1 class="title">Bibliography Title</h1>
  <p class="biblioentry"><!-- Biblioentry content --></p>
  <!-- More biblioentries below -->
</section>
----

// OPEN QUESTION: Is <p> sufficient for biblioentries, or do we need more sophisticated tagging for proper CSS styling?

[[glossary]]
==== Glossary

*Legacy DB element*: <glossary>

*New HTML element*: <section> for formal titled glossary; <dl> for the actual definition list

*Special semantics*: +class="glossary"+ on <section> and <dl>; class="glossterm" on <dt>; class="glossdef" on <dd>

*Accessibility Best Practices*: Wrap the term text in a https://developer.mozilla.org/en-US/docs/HTML/Element/dfn[<dfn>]

*Example*

----
<section class="glossary">
  <!-- h1 used for all glossary titles -->
  <h1 class="title">Glossary Title</h1>
  <dl class="glossary">
    <dt class="glossterm">
      <dfn>Atlas</dfn>
    </dt>
    <dd class="glossdef">
      Best authoring platform ever
    </dd>
   </dl>
</section>
----

==== Preface

*Legacy DB element*: <preface>

*New HTML element*: <section>

*Special semantics*: +class="preface"+ or class="foreword", depending on content

*Example*

----
<section class="preface">
  <!-- h1 used for all preface titles -->
  <h1 class="title">Preface Title</h1>
  <!-- Lots of preface content here -->
</section>
----

==== Colophon

*Legacy DB element*: <colophon>

*New HTML element*: <section>

*Special semantics*: +class="colophon"+ 

*Example*

----
<section class="colophon">
  <!-- optional h1 used for colophon titles -->
  <h1 class="title">Colophon Title</h1>
  <!-- Lots of colophon content here -->
</section>
----

==== Part

*Legacy DB element*: <part>

*New HTML element*: <section>

*Special semantics*: +class="part"+ 

*Example*

----
<section class="part">
  <!-- h1 used for all part titles -->
  <h1 class="title">Part Title</h1>
  <!-- Lots of part content here -->
</section>
----

==== Dedication

*Legacy DB element*: <dedication>

*New HTML element*: <section>

*Special semantics*: +class="dedication"+ 

*Example*

----
<section class="dedication">
  <!-- optional h1 used for dedication titles -->
  <h1 class="title">Dedication Title</h1>
  <p>I owe it all to Project Unicorn</p>
</section>
----

==== Index

*Legacy DB element*: <index>

*New HTML element*: <section>

*Special semantics*: +class="index"+ on <section>; class="indexdiv" on each term grouping; class="indexentry" on each indexentry; class="indexentry xref" on index hyperlinksfootnote:[Only "index" is from EPUB3 Structural Semantics Vocabulary; all the rest are DocBook semantics]

// OPEN QUESTION: Not entirely sold on using a definition list to mark up index sections; yes, it provides a built-in mechanism for doing the necessary indentation for subentries, but shoehorning in the index results in icky empty <dd>s in places and semantically it's a bad fit. Wondering why not use an <ol> or <ul> instead? Either way, we'd suppress the markers in CSS (for Mobi, we'd need to transform to <div>/<blockquote> markup--sigh)

// OPEN QUESTION 2: What class to use on index hyperlinks? I'm not in love with "indexentry xref", but I wanted a way to indicate that it was an XREF and that it was in an indexentry

// OPEN QUESTION 3: Special semantics for entry level (primary, secondary, tertiary)?

*Example*

----
<section class="index">
  <!-- optional h1 used for index titles -->
  <h1 class="title">Index Title</h1>
  <div class="indexdiv">
    <h2 class="title">A</h2>
    <dl>
      <dt class="indexentry">Aardvark, <a class="indexentry xref" href="ch01#aardvark">All about Aardvark</a></dt>
      <dd>
	<dl>
           <dt class="indexentry">precursor to Atlas, <a class="indexentry xref" href="ch01#atlasagain">Precursors to Atlas</a></dt>
           <dd></dd>
         </dl>
      </dd>
      <dt class="indexentry">Atlas, <a class="indexentry xref" href="ch01#atlas">All about Atlas</a>
      <dd></dd>
     </dl>
  </div>
</section>
----

==== Title Page

*Legacy DB element*: No directly corresponding element; titlepage section is autogenerated from book metadata

*New HTML element*: <section>

*Special semantics*: +class="titlepage"+ 

*Example*

----
<section class="titlepage">
  <!-- h1 used for book title -->
  <h1 class="title">Book Title</h1>
  <!-- Whatever else goes on the title page: publishername, logo, etc. -->
</section>
----

==== Copyright Page

*Legacy DB element*: No directly corresponding element; copyright page section is autogenerated from book metadata

*New HTML element*: <section>

*Special semantics*: +class="copyright-page"+ 

*Example*

----
<section class="copyright-page">
  <!-- Standard copyright page info marked up in headings, <div>s, <p>s, and lists -->
</section>
----

==== Table of Contents

*Legacy DB element*: <toc> (which we never use, because we autogenerate our TOCs)

*New HTML element*: <nav>

*Special semantics*: +class="toc"+ (epub:type="toc" must be added for EPUB 3 output, if not in source)

*Note*: The TOC should be conformant to the specs for the EPUB3 Navigation document (i.e., an <ol> within a <nav>)

*Example*

----
<nav class="toc" epub:type="toc">
  <h1 class="title">Table of Contents</h1>
   <ol>
     <li><a href="examples_page.html">A Note Regarding Supplemental Files</a></li>
     <li><a href="pr02.html">Foreword</a></li>
     <li><a href="pr03.html">Contributors</a>
       <ol>
         <li><a href="pr03.html#I_sect1_d1e154">Chapter Authors</a></li>
         <li><a href="pr03.html#I_sect1_d1e260">Tech Editors</a></li>
       </ol>
     </li>
  <!-- And so on... -->
  </ol>
</nav>
----

=== Block Elements

==== Paragraph

*Legacy DB element*: <para> or <simpara>

*New HTML element*: <p>

*Special semantics*: in most cases, none--but we may define classes in specific circumstances; e.g., <p class="biblioentry">

*Example*:

----
<p>Nothing exciting here. Move on, yo!</p>
----

==== Sidebar

*Legacy DB element*: <sidebar>

*New HTML element*: <aside>

*Special semantics*: class="sidebar"

*Example*:

----
<aside class="sidebar">
  <!-- Optional h5 for sidebar title -->
  <h5 class="title">Amusing Digression</h5>
  <p>Did you know that in Boston, they call it "soda", and in Chicago, they call it "pop"?</p>
</aside>
----

==== Admonitions

*Legacy DB element*: <note>, <tip>, <warning>, <caution>, <important>

*New HTML element*: <div>

*Special semantics*: class="note" or class="warning" (these are the two admon values in the EPUB 3 Structural Semantics Vocabulary spec; we can always define more if note/warning do not suffice)

*Note*: Given the current state of EPUB 3 support, we will likely need to transform back to <div> in EPUB output order to ensure backward compatibility in EPUB 2 readers

*Example*:

----
<div class="note">
  <p>Type "hubot kitteh" to get a picture of an adorable cat</p>
</div>
----

==== Sections

*Legacy DB element*: <section>, <sect1>, <sect2>, <sect3>, <sect4>, <sect5>

*New HTML element*: <section>

*Special semantics*: class="sect1", class="sect2", class="sect3", class="sect4", class="sect5"

*Note*: EPUB 3 Structural Semantic Vocabulary only has the term "division" for sections, and has no semantics for different section levels, so the above semantics are pulled directly from DocBook (operating on the assumption that semantics for section level are valuable in CSS, such that we don't need to write selectors like:

----
section section section section { font-size: 50% }
----

*Note 2*: Proposed use of HTML heading elements for sections is as follows:

----
sect1 -> h1
sect2 -> h2
sect3 -> h3
sect4 -> h4
sect5 -> h5
----

*Note 3*: Given the current state of EPUB 3 support, we will likely need to transform back to <div> in EPUB output order to ensure backward compatibility in EPUB 2 readers

*Example*:

----
<section class="sect1">
  <h1>A-Head</h1>
  <p>If you httpparty, you must party hard</p>
  <!-- Some more paragraphs -->
  <section class="sect2">
    <h2>B-Head</h2>
    <p>What's the frequency, Kenneth?</p>
    <!-- And so on... -->
  </section>
</section>
----

==== Tables

*Legacy DB element*: <table>

*New HTML element*: <table>

*Special semantics*: None, but use child <caption> element for table title

*Example*:

----
<table>
<caption>State capitals</caption>
<tr>
  <th>State</th>
  <th>Capital</th>
</tr>
<tr>
  <td>Massachusetts</td>
  <td>Boston</td>
</tr>
<!-- And so on -->
</table>
----

==== Figures

*Legacy DB element*: <figure>

*New HTML element*: <figure>

*Special semantics*: None, but use child <figcaption> element for figure title

*Note*: May need to transform <figure> to a <div> for EPUB output for EPUB 2 backward compatibility

*Example*:

----
<figure>
<figcaption>Project Unicorn Logo</caption>
<img src="unicorn.gif"/>
</figure>
----

==== Examples

*Legacy DB element*: <example>

*New HTML element*: <div>

*Special semantics*: class="example"footnote:[From DocBook; EPUB 3 Structural Semantics Vocabulary has no good match (closest is probably "practice")]

*Note*: Examples are intended to be titled in DocBook model; Would suggest using <caption>, but HTML spec reserves it exclusively for table elements.

*Note*: Typically in our books, examples contain code listings, but this is not a requirement in the DocBook model, and occasionally, we'll include other block content instead (lists, paras, etc.)

*Example*:

----
<div class="example">
<h5>Hello World in Python</h5>
<pre class="programlisting">print "Hello World"</pre>
</div>
----

==== Code listings

*Legacy DB element*: <programlisting> or <screen>

*New HTML element*: <pre>

*Special semantics*: class="programlisting" or class="creen"footnote:[From DocBook; EPUB 3 Structural Semantics Vocabulary has no semantics for code blocks)]

*Note*: May not be worth supporting semantic distinction between "screen" and "programlisting", but I can see it being valuable, if we want distinct styling for command-line environments.

*Example*:

----
<pre class="programlisting">print "Hello World"</pre>
----

==== Ordered lists

*Legacy DB element*: <orderedlist>

*New HTML element*: <ol>

*Special semantics*: None

*Example*:

----
<ol>
<li>Step 1</li>
<li>Step 2</li>
<!-- And so on -->
</ol>
----

==== Itemized lists

*Legacy DB element*: <itemizedlist>

*New HTML element*: <ul>

*Special semantics*: None

*Example*:

----
<ul>
<li>Red</li>
<li>Orange</li>
<!-- And so on -->
</ul>
----

==== Definition lists

*Legacy DB element*: <variablelist>

*New HTML element*: <dl>

*Special semantics*: Generally none, but see <<glossary>> for an example of a special case

*Example*:

----
<dl>
  <dt>Constant Width Bold</dt>
  <dd>Used to indicate user input</dd>
</dl>
----

==== Blockquote

*Legacy DB element*: <blockquote>

*New HTML element*: <blockquote>

*Special semantics*: class="epigraph", class="attribution"footnote:[From DocBook; no close match in EPUB 3 Structural Semantics Vocabulary] where appropriate

*Example*:

----
<blockquote class="epigraph">
  <p>When in the course of human events...</p>
  <p class="attribution">U.S. Declaration of Independence</p>
</blockquote>
----

==== Headings

*Legacy DB element*: <title>

*New HTML element*: <h1>, <h2>, <h3>, <h4>, <h5>, <h6>

*Special semantics*: class="title"

*Note*: In DocBook, <title> is used for all heading titles, regardless of "level", and context is used to determine formatting/styling. In HTML, best practice suggests that we associate each heading with a level from <h1> to <h6> that roughly indicates its rank. Here are my proposed mappings for each section type:

----
book title -> h1
part title -> h1
chapter title -> h1
preface title -> h1
appendix title -> h1
colophon title -> h1
dedication title -> h1
glossary title -> h1
bibliography title -> h1
sect1 title -> h1
sect2 title -> h2
sect3 title -> h3
sect4 title -> h4
sect5 title -> h5
sidebar title -> h5
example title -> h5
equation title -> h5
admon title -> h6
----

I'm advocating we use h1 for book title, part title, and chapter-level titles because I think it's important to have consistency across all books, regardless of whether they have Parts or not. I think it would be confusing and potentially problematic if in a book that had parts, <h1> was used for part titles and <h2> was used for chapter titles, and then in a book that had no parts, <h1> was used for chapter titles. 

I also like the idea of having heading level match the section class semantics, such that sect1 = <h1>, sect2 = <h2>, etc. I think doing anything else would be confusing.

Look forward to discussing all this further, though.

==== Equation

*Legacy DB element*: <equation>

*New HTML element*: <div>

*Special semantics*: class="equation"footnote:[From DocBook; no close match in EPUB 3 Structural Semantics Vocabulary]

*Note: Support embedded MathML or LaTex, as well as images

*Example*:

----
<div class="equation">
<h5>Pythagorean Theorem</h5>
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <msup><mi>a</mi><mn>2</mn></msup>
  <mo>+</mo>
  <msup><mi>b</mi><mn>2</mn></msup>
  <mo>=</mo>
  <msup><mi>c</mi><mn>2</mn></msup>
</math>
</div>
----

=== Inline Elements

==== Emphasis (bold)

*Legacy DB element*: <emphasis>

*New HTML element*: <em>

*Special semantics*: class="roman" where appropriatefootnote:[From DocBook; no close match in EPUB 3 Structural Semantics Vocabulary]; potentially some other options

Example:

----
<p>I <em>love</em> Atlas!</p>
----

==== Strong (generally bold)

*Legacy DB element*: <emphasis>

*New HTML element*: <strong>

*Special semantics*: class="bold" where appropriatefootnote:[From DocBook; no close match in EPUB 3 Structural Semantics Vocabulary]; potentially some other options

Example:

----
<p>I <strong>love</strong> Atlas!</p>
----

==== Literal (for inline code elements: variables, functions, etc.)

*Legacy DB element*: <literal>, <userinput>, <replaceable>

*New HTML element*: <code>

*Special semantics*: class="userinput" or class="replaceable"  where appropriatefootnote:[From DocBook; no close match in EPUB 3 Structural Semantics Vocabulary]; potentially some other options

Example:

----
<p>Enter <code class="userinput">echo "Hello World"</code> on the command line</p>
----

==== General-purpose phrase markup for other styling (underline, strikethrough, etc.)


*Legacy DB element*: <phrase>

*New HTML element*: <span>

*Special semantics*: class="underline", class="strikethrough"footnote:[From DocBook; no close match in EPUB 3 Structural Semantics Vocabulary]; potentially some other options

==== Footnote, endnote

*Legacy DB element*: <footnote>

*New HTML element*: <a> (for marker); <div> for block of footnote/endnote content; <aside> for footnote or endnote

*Special semantics*: class="noteref" (for marker); class="footnotes" or class="rearnotes" for block of footnotes/endnotes; class="footnote" or class="rearnote" for footnote or endnote

*Note*: May need to transform <aside> to a <div> for EPUB output for EPUB 2 backward compatibility

Example:

----
<p>Five out of every six people who try AsciiDoc prefer it to Markdown<a href="#ftn1" id="ftnref1" class="noteref">1</a></p>
<!-- Interceding text -->
<div class="footnotes">
<aside class="footnote"><sup><a href="#ftn1ref1">1</a></sup> Totally made-up statistic</aside>
</div>
----

==== Cross-references

*Legacy DB element*: <xref> or <link>

*New HTML element*: <a>

*Special semantics*: class="xref"footnote:[From DocBook; no close match in EPUB 3 Structural Semantics Vocabulary]

Example:

----
<section id="html5" class="chapter">
  <h1>Intro to HTML5<h1>
  <p>As I said at the beginning of <a href="#html5">Chapter 1</a>, HTML5 is great...</p>
  <!-- Blah blah blah -->
</section>
----

==== Index Term

*Legacy DB element*: <indexterm>

*New HTML element*: <a>

*Special semantics*: class="indexterm"; data-primary="primary entry"; data-secondary="secondary entry"; data-tertiary="tertiary entry"; data-see="see term"; data-seealso="see also term"; data-sortas="alphabetization term"footnote:[From DocBook; no close match in EPUB 3 Structural Semantics Vocabulary]

*Note*: Use of HTML5 data-* attributes seemed best fit for nonrendererd indexterm data, but would like to discuss this further.

*Example*:

----
<p>The Atlas build system<a class="indexterm" data-primary="Atlas" data-secondary="build system"/> lets you build EPUB, Mobi, PDF, and HTML content</p>
----

==== Superscripts

*Legacy DB element*: <superscript>

*New HTML element*: <sup>

*Special semantics*: None

*Example*:

----
<p>The area of a circle is πr<sup>2</sup></p>
----

==== Subscripts

*Legacy DB element*: <subscript>

*New HTML element*: <sub>

*Special semantics*: None

*Example*:

----
<p>The formula for water is H<sub>2</sub>O</p>
----

=== Metadata

All metadata should be captured in the <head> of the main book HTML file; consider following http://idpf.org/epub/30/spec/epub30-publications.html#sec-metadata-elem[metadata conventions specified in EPUB 3 specification]
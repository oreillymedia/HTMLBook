<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Getting Started with Atlas</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1"/></head>
<body>
<div xml:lang="en" class="book" title="Getting Started with Atlas" id="idp185696">

<section class="chapter" title="Chapter 5. Advanced AsciiDoc" id="advanced_asciidoc">
  <h1 class="title">Advanced AsciiDoc</h1>
  <p>This is another chapter, with some more esoteric/experimental things…</p>

  <div class="sect1" title="Passthroughs">
    <h1 class="title" id="passthroughs">Passthroughs</h1>
    <p><a class="xref" href="#intro_to_asc" title="Chapter 4. AsciiDoc 101">Chapter 4</a> makes several references to “passthroughs.” You can use a DocBook passthrough when you’ve got an especially complex piece of markup or you’re trying to do something that AsciiDoc doesn’t support. AsciiDoc supports two types of passthroughs:</p>

    <dl>
      <dt>Inline passthroughs</dt>
      <dd><p>For inlines, you can indicate a passthrough at any time by like this: <code class="literal">passthrough goes here</code>. See <a class="xref pagenum" href="#challenging_inlines" title="Challenging Inlines">“Challenging Inlines”</a> for examples of inline passthroughs.</p></dd>

      <dt>Block passthroughs</dt>
      <dd><p>You can also pass though a block of DocBook XML. Here’s the image markup that we used in <a class="xref" href="#intro_to_asc" title="Chapter 4. AsciiDoc 101">Chapter 4</a>, passed through as DocBook:</p></dd>
    </dl>

    <pre class="programlisting">----
      &lt;figure id="FIG1" float="none"&gt;
      &lt;title&gt;A Figure&lt;/title&gt;
      &lt;mediaobject&gt;
        &lt;imageobject&gt;
        &lt;imagedata fileref="images/tiger.png"/&gt;
        &lt;/imageobject&gt;
      &lt;/mediaobject&gt;
      &lt;/figure&gt;
      ----</pre>

    <div class="note" title="Note" summary="Note">
      <p>Using the block passthrough method described above, you could potentially pass through an entire chapter of DocBook.</p>
    </div>
  </div>

  <div class="sect1" title="Underlined vs. Delimited">
    <h1 class="title" id="underlined_delimited">Underlined vs. Delimited</h1>
    <p>Section titles can be in either of two formats: “underlined” or delimited.</p>
    <p>Note that the levels described in the <a class="ulink" href="http://www.methods.co.nz/asciidoc/userguide.html" target="_top">AsciiDoc User Guide</a> can be confusing: in AsciiDoc, the document (book) is considered level 0; generally a chapter will be at AsciiDoc level 1 (unless you’re dividing the book into parts), and sections within chapters start at AsciiDoc level 3 (which is equivalent to DocBook <code class="literal">&lt;sect1&gt;</code>).</p>
  </div>

  <div class="sect1" title="Top-Level Section Title (Underlined Style)">
    <h1 class="title" id="_top_level_section_title_underlined_style">Top-Level Section Title (Underlined Style)</h1>
    <p>Narrative text here.</p>

      <div class="sect2" title="Second-Level Section Title (Underlined Style)">
        <h2 class="title" id="_second_level_section_title_underlined_style">Second-Level Section Title (Underlined Style)</h2>
        <p>More text here.</p>
        
        <div class="sect3" title="Third-Level Section Title (Underlined Style)">
          <h3 class="title" id="_third_level_section_title_underlined_style">Third-Level Section Title (Underlined Style)</h3>
          <p>And some more here.</p>
        </div>
      </div>
    </div>

  <div class="sect1" title="Challenging Inlines">
    <h2 class="title" id="challenging_inlines">Challenging Inlines</h2>
    <p>Using inlines in AsciiDoc can be tricky:</p>
    <ul>
      <li><p>Delimiters may not be interpreted as intended if they don’t abut whitespace on both sides; the fix for this is to double them up, as explained under <a class="ulink" href="http://www.methods.co.nz/asciidoc/userguide.html#X52" target="_top">“Constrained and Unconstrained Quotes”</a> in the AsciiDoc User Guide. For example, compare how these render in the PDF: <em>+foo+ bar</em> vs. <em><code class="literal">foo</code> bar</em></p></li>

      <li><p>Attempting to nest inlines within each other may result in invalid DocBook (because the content model of one may not include the other). For example, <strong><code class="literal">foo</code></strong> requires the asterisk (*) pair outside and the plus-symbol (+) pair inside. If you try the other way around, the build will likely fail with this error message:</p>
      <pre class="screen">Element emphasis is not declared in literal list of possible children</pre></li>

      <li><p>For more precise semantics, you can always use “passthroughs” to embed DocBook markup as is, e.g. <code class="replaceable">foo</code>, <code class="userinput">foo</code>, and <code class="replaceable userinput">foo</code> are fairly common in O’Reilly books, rendered as CWI, CWB, and CWBI, respectively (constant-width with italic, bold, and bold+italic).</p></li>
    </ul>

    <p>For generic emphasis, you can also surround a string with single, straight quotation marks (apostrophes): i.e., <em>this</em> is equivalent to <em>that</em>. As an enhancement for finer-tuned semantic distinctions downstream, the Atlas configuration file supports the following variants, via <code class="literal">@role</code> attributes:</p>

    <ul>
      <li><p>to indicate a filename or path, use <code class="filename">/path/to/file.ext</code> or <code class="filename">/path/to/file.ext</code></p></li>
      
      <li><p>for a book title, use <em class="citetitle">This Book Needs No Title</em> or <em class="citetitle">This Book Needs No Title</em></p></li>
    </ul>

    <p>To get curly quotes you can use AsciiDoc’s mechanism for ‘singles’ and “doubles” (or you can always use Unicode like so: “quote me”).</p>

    <p>Subscripts and superscripts work like so: H<sub>2</sub>O and 2<sup>5</sup> = 32 (but if you’re doing math, you’d probably want to italicize the variables, like so: <em>x</em><sup>2</sup> + <em>y</em><sup>2</sup> = <em>z</em><sup>2</sup>).</p>

    <p>If using footnotes, please place the macro<a href="#ftn1" id="ftnref1" class="noteref">1</a> directly after the text, with no space between (otherwise you’ll introduce extra space<a href="#ftn2" id="ftnref2" class="noteref">2</a> before the in-text mark); footnotes at the end of a sentence belong after the period.<a href="#ftn3" id="ftnref3" class="noteref">3</a></p>
  </div>

  <div class="sect1" title="Yet More on Code Callouts">
    <h1 class="title" id="callout-multiples">Yet More on Code Callouts</h1>

    <p>If you want to refer to the same explanation from more than one line of code, please <em>do not</em> use the built-in mechanism (<a class="xref" href="#bad_dup_layout" title="Example 5-1. Built-in Mechanism (Vertical Layout Bad)">Example 5-1</a>), which does not conform to house style. Instead, use either <a class="xref" href="#alt_dup_layout" title="Example 5-2. Alternate Approach 1: Repeat Icon in Code">Example 5-2</a> or <a class="xref" href="#horiz_layout" title="Example 5-3. Alternate Approach 2: Unique Icons; Align Side-by-Side in Explanation">Example 5-3</a>.</p>

    <div class="example">
      <a id="bad_dup_layout"/>
      <h5>Example 5-1. Built-in Mechanism (Vertical Layout Bad)</h5>
      <pre class="screen"> 
        10/17/97   9:04  &lt;DIR&gt;    bin
        10/16/97  14:11  &lt;DIR&gt;    DOS             <a id="CO3-1"/><img src="callouts/1.pdf" alt="1"/>
        10/16/97  14:40  &lt;DIR&gt;    Program Files
        10/16/97  14:46  &lt;DIR&gt;    TEMP
        10/17/97   9:04  &lt;DIR&gt;    tmp
        10/16/97  14:37  &lt;DIR&gt;    WINNT
        10/16/97  14:25      119        AUTOEXEC.BAT    <a id="CO3-2"/><img src="callouts/2.pdf" alt="2"/>
        2/13/94   6:21       54,619     COMMAND.COM     <a id="CO3-3"/><img src="callouts/3.pdf" alt="3"/>
        10/16/97  14:25      115        CONFIG.SYS      <a id="CO3-4"/><img src="callouts/4.pdf" alt="4"/>
        11/16/97  17:17      61,865,984 pagefile.sys
        2/13/94   6:21       9,349      WINA20.386      <a id="CO3-5"/><img src="callouts/5.pdf" alt="5"/>
      </pre>

      <ol class="calloutlist">
        <li><p><a href="#CO3-1"><img src="callouts/1.pdf" alt="1"/></a> This directory holds MS-DOS.</p></li>

        <li><p><a href="#CO3-2"><img src="callouts/2.pdf" alt="2"/></a> <a href="#CO3-3"><img src="callouts/3.pdf" alt="3"/></a> <a href="#CO3-4"><img src="callouts/4.pdf" alt="4"/></a> System startup code for DOS. <strong>[Too much whitespace; confusing to readers]</strong></p></li>

        <li><p><a href="#CO3-5"><img src="callouts/5.pdf" alt="5"/></a> Some sort of Windows 3.1 hack.</p></li>
      </ol>
    </div>

    <p><a class="xref" href="#alt_dup_layout" title="Example 5-2. Alternate Approach 1: Repeat Icon in Code">Example 5-2</a> uses the <code class="literal">&lt;coref&gt;</code> element to refer to the same <code class="literal">&lt;callout&gt;</code> from multiple code lines.</p>

    <div class="example">
      <a id="alt_dup_layout"/>
      <h5>Example 5-2. Alternate Approach 1: Repeat Icon in Code</h5>
      <pre class="programlisting">
        10/17/97   9:04         &lt;DIR&gt;    bin
        10/16/97  14:11         &lt;DIR&gt;    DOS <a class="co" id="co-id1" href="#co1"><img src="callouts/1.pdf" alt="1"/></a>
        10/16/97  14:40         &lt;DIR&gt;    Program Files
        10/16/97  14:46         &lt;DIR&gt;    TEMP
        10/17/97   9:04         &lt;DIR&gt;    tmp
        10/16/97  14:37         &lt;DIR&gt;    WINNT
        10/16/97  14:25             119        AUTOEXEC.BAT <a class="co" id="co-id2" href="#co2"><img src="callouts/2.pdf" alt="2"/></a>
        2/13/94   6:21              54,619     COMMAND.COM <a class="co" id="co-id2" href="#co2"><img src="callouts/2.pdf" alt="2"/></a>
        10/16/97  14:25             115        CONFIG.SYS <a class="co" id="co-id2" href="#co2"><img src="callouts/2.pdf" alt="2"/></a>
        11/16/97  17:17            61,865,984  pagefile.sys
        2/13/94   6:21             9,349       WINA20.386 <a class="co" id="co-id3" href="#co3"><img src="callouts/3.pdf" alt="3"/></a>
      </pre>

      <ol class="calloutlist">
        <li><p><a id="co1"/><a href="#co-id1"><img src="callouts/1.pdf" alt="1"/></a> This directory holds MS-DOS.</p></li>

        <li><p><a id="co2"/><a href="#co-id2"><img src="callouts/2.pdf" alt="2"/></a> System startup code for DOS.</p></li>

        <li><p><a id="co3"/><a href="#co-id3"><img src="callouts/3.pdf" alt="3"/></a> Some sort of Windows 3.1 hack.</p></li>
      </ol>
    </div>

    <p><a class="xref" href="#horiz_layout" title="Example 5-3. Alternate Approach 2: Unique Icons; Align Side-by-Side in Explanation">Example 5-3</a> uses a different mechanism for several code lines to point to the same <code class="literal">&lt;callout&gt;</code>. In this case, each one gets a uniquely numbered icon. This is done by placing multiple values in a single <code class="literal">&lt;callout arearefs=…&gt;</code> while duplicating the <code class="literal">@linkends</code> value in the corresponding <code class="literal">&lt;co&gt;</code> elements in code. Note also the use of <code class="literal">&lt;?dbfo…&gt;</code> markup below the <code class="literal">&lt;calloutlist&gt;</code> opener; this adjusts the alignment for side-by-side icons.</p>

    <div class="example">
      <a id="horiz_layout"/>
      <h5>Example 5-3. Alternate Approach 2: Unique Icons; Align Side-by-Side in Explanation</h5>
      <pre class="programlisting">
        10/17/97   9:04         &lt;DIR&gt;    bin
        10/16/97  14:11         &lt;DIR&gt;    DOS <a class="co" id="thing1-co" href="#thing1"><img src="callouts/1.pdf" alt="1"/></a>
        10/16/97  14:40         &lt;DIR&gt;    Program Files
        10/16/97  14:46         &lt;DIR&gt;    TEMP
        10/17/97   9:04         &lt;DIR&gt;    tmp
        10/16/97  14:37         &lt;DIR&gt;    WINNT
        10/16/97  14:25             119  AUTOEXEC.BAT <a class="co" id="thing2-co" href="#thing2"><img src="callouts/2.pdf" alt="2"/></a>
        2/13/94   6:21          54,619  COMMAND.COM <a class="co" id="thing3-co" href="#thing2"><img src="callouts/3.pdf" alt="3"/></a>
        10/16/97  14:25             115  CONFIG.SYS
        11/16/97  17:17      61,865,984  pagefile.sys
        2/13/94   6:21           9,349  WINA20.386 <a class="co" id="thing5-co" href="#thing3"><img src="callouts/4.pdf" alt="4"/></a>
      </pre>

      <ol class="calloutlist">
        <a id="thing1"/>
        <li><p><a href="#thing1-co"><img src="callouts/1.pdf" alt="1"/></a> </p>This directory holds MS-DOS.</p></li>

        <li><p>
          <a id="thing2"/><a href="#thing2-co"><img src="callouts/2.pdf" alt="2"/></a>
          <a href="#thing3-co"><img src="callouts/3.pdf" alt="3"/></a> System startup code for DOS.</p></li>

        <li><p><a id="thing3"/><a href="#thing5-co"><img src="callouts/4.pdf" alt="4"/></a> Some sort of Windows 3.1 hack.</p></li>
      </ol>
    </div>
  </div>

  <div class="sect1" title="Page Breaking">
    <h1 class="title" id="page_breaking">Page Breaking</h1>

    <p>If you want to insert a hard page break into your PDF builds, you can do so with this passthrough:</p>

    <pre class="programlisting">
      ++++
      &lt;?hard-pagebreak?&gt;
      ++++
    </pre>

    <p>Please note that adding this page break processing instruction will have no effect on the EPUB and KF8 files.</p>
  </div>

  <div class="sect1" title="Controlling Line Breaks">
    <h1 class="title" id="controlling_line_breaks">Controlling Line Breaks</h1>
    
    <p>Use an inline passthrough to prevent a line break:</p>

    <pre class="screen">
      pass:[&lt;phrase role='keep-together'&gt;Don'tBreakMe&lt;/phrase&gt;]
    </pre>

  </div>

  <div class="sect1" title="Everything Else">
    <h1 class="title" id="everything_else">Everything Else</h1>

    <p>Finally, keep in mind that there may be situations where it’s hard to get AsciiDoc to format something the way you want. Sometimes there’s a trick to get around it; sometimes it’s better to use a passthrough block to embed a bit of DocBook; and sometimes there may be a different formatting approach that will mesh better with our production systems. If you need to do something not illustrated in this guide, please check with your editor.</p>
  </div>

    <!-- Interceding text --> 
  <div class="footnotes"> 
    <aside class="footnote"><sup><a href="#ftnref1">1</a></sup> This is a standard footnote.</aside> 
    
    <aside class="footnote"><sup><a href="#ftnref2">2</a></sup> This one has extraneous space before the in-text mark (although the footnote itself is fine).</aside> 
    
    <aside class="footnote"><sup><a href="#ftnref3">3</a></sup> If your footnote text includes [square brackets], you can escape them with a passthrough macro.</aside> 
  </div>

</section>

<section class="chapter" title="Chapter 6. Using Git with Atlas" id="using_git_with_atlas">
  <h1 class="title">Using Git with Atlas</h1>
  
  <p>While Atlas hides a lot of the complexity of using git<a id="idp6015536" class="indexterm" data-primary="git" />, there are still times when you may want to use it, such as:</p>

  <ul>
    <li><p>You hate editing in a web browser and would prefer a text editor, such as TextMate, Emacs, or BBEdit.</p></li>

    <li><p>You want to write when you’re offline—during a flight, for example.</p></li>

    <li><p>You’ve got a bunch of images to upload in bulk.</p></li>
  </ul>

  <p>If this sounds like you, then using git directly may be an attractive option. This is a quick introduction to using git with Atlas. If you want to know more about git and all the things you can do with it, check out these resources:</p>

  <ul>
    <li><p><a href="http://help.github.com/git-cheat-sheets/" target="_top">Git Cheat Sheet (GitHub)</a>. A great reference to the key commands.</p></li>

    <li><p><a href="http://hoth.entp.com/output/git_for_designers.html" target="_top">Git for Designers</a>. A nice introduction to git for non-programmers.</p></li>

    <li><p><a href="http://progit.org/book/" target="_top">Pro Git</a>. The online version of Scott Chacon’s excellent book, <em>Pro Git</em>.</p></li>

    <li><p><a href="http://www.youtube.com/watch?v=OFkgSjRnay4" target="_top">O’Reilly Webcast: Git in One Hour</a>. A nice video from Scott Chacon that introduces all the key parts of using git.</p></li>
  </ul>

  <div class="sect1" title="Git Terminology and Command Reference">
    <h2 class="title" id="git_terminology">Git Terminology and Command Reference</h2>
    
    <p>Here are some of the key terms you’ll need to understand to use git:</p>

    <dl>
      <dt>Local repository</dt>
      <dd><p>A git repository that is on your local drive. You can make any changes you want to this copy without affecting other files.</p></dd>

      <dt>Branch</dt>
      <dd><p>A named version set of files within a git repository. The default name is “master.” We won’t be doing much with branches, but they’re a very handy tool that you can lean more in the <a href="http://book.git-scm.com/3_basic_branching_and_merging.html" target="_top">Basic Branching and Merging</a> chapter of the <a href="http://book.git-scm.com/" target="_top">git community book</a>.</p></dd>
    
      <dt>Remote repository</dt>
      <dd><p class="simpara">A named link to a git repository on another machine. You can have as many remote repositories as you want. “Origin” is the default name, but you can choose any name you like when you add new “remotes” (links to other repositories on different servers).</p></dd>

      <dt>Push and pull</dt>
      <dd><p>git lingo for sending the changes made in a local repository to a remote repository, or vice versa.</p></dd>

      <dt>Cloning</dt>
      <dd><p>Downloading a remote git repository onto your own machine so that you can edit it locally.</p></dd>

      <dt>Forking</dt>
      <dd><p>GitHub lingo for cloning a repo from someone else’s GitHub account into your own so that you can modify and change without touching the original copy. Forking a repo is often the first step when you want to start working on a project.</p></dd>

      <dt>Commit</dt>
      <dd><p>A commit saves all your changes under version control.</p></dd>
    </dl>

    <div class="warning" title="Warning" summary="Warning">
      <p>One major difference between editing in the Atlas wiki and editing locally is that, in the wiki, all changes are committed for you automatically. This is <em>not</em> the case when you’re editing locally: you can make and save changes, but until you commit, you cannot push changes to Atlas. Why? The reason is a reflection of git’s history as a software development tools.</p>

      <p>Git was designed to allow developers to experiment with their code by changing lots of files. Assuming everything works, the programmer can then commit the changes into the master branch of the code. If the changes don’t work, he or she can simply roll back the changes to the last version that worked and start over. So a commit is an affirmative statement that the changes are acceptable.</p>
    </div>

    <p><a class="xref" href="#command_reference" title="Table 6-1. Command quick reference">Table 6-1</a> summarizes some commonly used commands.</p>

    <table>
      <a id="command_reference"/>
      <caption>Table 6-1. Command quick reference</caption>

      <tbody>
        <tr>
          <td><p><code class="literal">git init</code></p></td>
          <td><p>Creates a new blank repo</p></td>
        </tr>

        <tr>
          <td><p><code class="literal">git commit -a -m"Your helpful commit message"</code></p></td>
          <td><p>Commits changes to the repo</p></td>
        </tr>

        <tr>
          <td><p><code class="literal">git status</code></p></td>
          <td><p>Returns the commit status of the current repo</p></td>
        </tr>

        <tr>
          <td><p><code class="literal">git add *</code></p></td>
          <td><p>Adds all files to the repo</p></td>
        </tr>

        <tr>
          <td><p><code class="literal">git remote add _remote_name_ _remote_URL_</code></p></td>
          <td><p>Adds a remote repository to which you can push or pull changes</p></td>
        </tr>

        <tr>
          <td><p><code class="literal">git remote -v</code></p></td>
          <td><p>Lists the remotes in your repo</p></td>
        </tr>

        <tr>
          <td><p><code class="literal">git push _remote_name_ _branch_name_</code></p></td>
          <td><p>Pushes changes from the specified local branch specified to a remote repo. We’ll mostly use “git push origin master”</p></td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="sect1" title="Frequently Asked Questions About Using Git with Atlas">
    <h1 class="title" id="faqs_git_atlas">Frequently Asked Questions About Using Git with Atlas</h1>

    <div class="sect2" title="Where Do I Get Git?">
      <h2 class="title" id="where_get_git">Where Do I Get Git?</h2>

        <p>You can download git from <a href="http://git-scm.com/" target="_top">the git-scm site</a>. Just follow the instructions for your platform.</p>
    </div>

    <div class="sect2" title="How Do I Clone My Project from Atlas?">
      <h2 class="title" id="how_clone_atlas">How Do I Clone My Project from Atlas?</h2>

      <p>To pull down your project from Atlas:</p>

      <ol>
        <li><p>Go to the Metadata tab and copy the Git URL (it’s the first field)</p></li>

        <li><p>Drop into a command line and use <code class="literal">git clone _&lt;your_git_url&gt;_</code> to pull down the repo. By default, using this command as is will pull the repo into a directory name based on the ISBN. You can override this by putting a new directory name at the end of the command.</p></li>

        <li><p>You’ll be prompted for a password—enter the password you use to log into Atlas</p></li>
      </ol>

      <p>Here’s a log:</p>

      <pre class="programlisting">
        $ cd ~/Desktop
        $ git clone https://odewahn%40oreilly.com@atlas-admin.oreilly.com/git/1230000000189.git
        Cloning into 1230000000189...
        Password:
        remote: Counting objects: 68, done.
        remote: Compressing objects: 100% (63/63), done.
        remote: Total 68 (delta 16), reused 0 (delta 0)
        Unpacking objects: 100% (68/68), done.
        $ cd 1230000000189
      </pre>
    </div>

    <div class="sect2" title="How Do I Write Locally Using TextMate?">
      <h2 class="title" id="how_write_locally">How Do I Write Locally Using TextMate?</h2>

      <p>You can use any text editor you want to edit Atlas projects. If you’re on a Mac, here’s how you’d use the popular TextMate editor,</p>

      <ol>
        <li><p>Install the editor. You can download it from the <a href="http://macromates.com/" target="_top">TextMate</a> site.</p></li>

        <li><p>Install and configure the AsciiDoc bundle.</p></li>

        <li><p>Enable command-line usage.</p></li>

        <li><p>Edit your files.</p></li>
      </ol>

      <p>More details on the bundle and configuring AsciiDoc for the command line follows.</p>

      <p>Once you’ve installed TextMate, go grab the <a href="https://github.com/zuckschwerdt/asciidoc.tmbundle" target="_top">AsciiDoc bundle</a> to make it much easier to work with AsciiDoc. It will give you features like automatic previews, source highlighting, and so forth. Here’s what you do for this:</p>

      <pre class="programlisting">
        $ mkdir -p /Library/Application\ Support/TextMate/Bundles
        $ cd ~/"Library/Application Support/TextMate/Bundles/"
        $ git clone git://github.com/zuckschwerdt/asciidoc.tmbundle.git "AsciiDoc.tmbundle"
        $ osascript -e 'tell app "TextMate" to reload bundles'
      </pre>

      <p>Now the the bundle is installed, your AsciiDoc markup will have all the color-coded goodness you’ve come to expect in a text editors.</p>

      <div class="note" title="Note" summary="Note">
        <p>You have to give the files an extension of <em>.asciidoc</em> for the syntax highlighting to work.</p>
      </div>

      <p>Change into the directory where you installed the sample repository and type the following command:</p>

      <pre class="screen">$ mate .</pre>

      <p>This command will open the editor and display the <em>project drawer</em>, which is a navigation tree that you can use to move between files. Use the project drawer to open the file called <em>sec_environments.asc</em>, as shown in <a href="#textmate-fig" title="Figure 6-1. Using TextMate and the AsciiDoc Bundle">Figure 6-1</a>.</p>

      <figure>
        <a id="textmate-fig"/>
        <img src="images/textmate_editor.png" alt="A screenshot of AsciiDoc text in TextMate with colored syntax highlighting"/>
        <figcaption>Figure 6-1. Using TextMate and the AsciiDoc Bundle</figcaption>
      </figure>

      <p>If you’ve worked in a wiki before, this markup should look pretty familiar. Also, note how the various AsciiDoc elements are all nicely color coded because of the AsciiDoc bundle that you installed earlier.</p>

      <p>To run TextMate from the command line, you must configure your system so that it “knows” where TextMate is installed. The simplest way to do this is to use the “Terminal Usage” feature right in TextMate’s control bar. Just click “Help → Terminal Usage…” and then click “Create Link.” <a class="xref" href="#textmate_cmd_line" title="Figure 6-2. Setting Up TextMate for the Command Line">Figure 6-2</a> shows how this works.</p>

      <figure>
        <a id="textmate_cmd_line"/>
        <img src="images/textmate_cmd_line.png" alt="A screenshot showing how to enable Terminal Usage in TextMate"/>
        <figcaption>Figure 6-2. Setting Up TextMate for the Command Line</figcaption>
      </figure>
    </div>

    <div class="sect2" title="I’ve Edited My Files. Now What?">
      <h2 class="title" id="edited_now_what">I’ve Edited My Files. Now What?</h2>
      
      <p>Once you’ve made your edits, you use two commands to add any new files and commit your changes:</p>

      <ul>
        <li><p>Add any new files so that git can start tracking them. Use <code class="literal">git add _&lt;filename&gt;_</code> to add an individual file. Use <code class="literal">git add .</code> to add all files in the current directory and all subdirectories.</p></li>

        <li><p>Commit the changes using <code class="literal">git commit -a -m'_commit message_'</code>. Try to use the commit message to leave yourself a note about what you were doing. For example, if you were just adding a big section on the <em>foo</em> method, you’d use a message like “Added section covering foo.”</p></li>

        <li><p>Push the changes back up to Atlas using <code class="literal">git push origin master</code>.</p></li>
      </ul>

      <p>Here’s an example:</p>

      <pre class="programlisting">
        $ git add .
        $ git commit -a -m"Made some changes while on the plane"
        $ git push origin master
      </pre>
    </div>

    <div class="sect2" title="I Am Trying to Push Some Changes to Atlas, but It Keeps Reporting That Everything Is Up to Date. What’s Up?">
      <h2 class="title" id="push_some_changes">I Am Trying to Push Some Changes to Atlas, but It Keeps Reporting That Everything Is Up to Date. What’s Up?</h2>

      <p>You probably forgot to either add any new files, or you forgot to commit your changes. (Or both!) You can check if you have any changes using <code class="literal">git status</code>, like this:</p>

      <pre class="programlisting">
          $ git status
          # On branch master
          # Changes not staged for commit:
          # (use "git add &lt;file&gt;..." to update what will be committed)
          # (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
          #
          #       modified:   git_quick_start.asciidoc
          # no changes added to commit (use "git add" and/or "git commit -a")
      </pre>

      <p>When you commit the changes, you’ll get something like this:</p>

      <pre class="programlisting">
        $ git commit -a -m"Minor edits"
        [master 955189b] Minor edits
        1 files changed, 47 insertions(+), 6 deletions(-)
        new-host:1230000000197 odewahn
        $ git status
        # On branch master
        # Your branch is ahead of 'origin/master' by 1 commit.
        # nothing to commit (working directory clean)
        new-host:1230000000197 
      </pre>
    </div>

    <div class="sect2" title="Hey, My Push to Atlas Keeps Getting Rejected. What’s Up with That?">
      <h3 class="title" id="push_rejected">Hey, My Push to Atlas Keeps Getting Rejected. What’s Up with That?</h3>

      <p>If you’re getting a message that your changes are rejected, it’s most likely because someone has changed the files on Atlas since you started working locally. To fix this, you’ll need to commit your current changes and then use <code class="literal">git pull origin master</code> to pull in the changes from Atlas. Once you’ve synced the changes, you’ll be able to push your work back up.</p>

      <p>Here’s the rejection notice:</p>

      <pre class="programlisting">
        $ git push origin master
        Password:
        To https://odewahn%40oreilly.com@atlas-admin.oreilly.com/git/1230000000197.git
         ! [rejected]        master -&gt; master (non-fast-forward)
         error: failed to push some refs to 'https://odewahn%40oreilly.com@atlas-
         admin.oreilly.com/git/1230000000197.git'
         To prevent you from losing history, non-fast-forward updates were rejected
         Merge the remote changes (e.g. 'git pull') before pushing again. See the 'Note about fast-forwards' section of 'git push --help' for details.
      </pre>

      <p>To fix this, you need to pull in the new changes, like so:</p>

      <pre class="programlisting">
        $ git pull origin master
        Password:
        remote: Counting objects: 5, done.
        remote: Compressing objects: 100% (3/3), done.
        remote: Total 3 (delta 2), reused 0 (delta 0)
        Unpacking objects: 100% (3/3), done.
        From https://atlas-admin.oreilly.com/git/1230000000197
         * branch            master     -&gt; FETCH_HEAD
        Updating e26e9b6..fd7c13d
        Fast-forward
         book.asciidoc |    2 --
         1 files changed, 0 insertions(+), 2 deletions(-)
      </pre>

      <aside class="sidebar" title="HTTP Error When Pushing to Atlas">
        <h5 class="title">HTTP Error When Pushing to Atlas</h5>
        <p>When pushing large batches of files to Atlas (e.g., a set of figure images), you may encounter an error like the following:</p>

        <pre class="programlisting">
          $ git push origin master
          Password for 'atlas-admin.oreilly.com':
          Counting objects: 39, done.
          Delta compression using up to 2 threads.
          Compressing objects: 100% (35/35), done.
          Writing objects: 100% (35/35), 83.19 MiB | 604 KiB/s, done.
          Total 35 (delta 2), reused 0 (delta 0)
          error: RPC failed; result=22, HTTP code = 502
          fatal: The remote end hung up unexpectedly
          fatal: The remote end hung up unexpectedly
        </pre>

        <p>This usually indicates that your HTTP POST buffer is too small to handle the files being posted. Try increasing the buffer size by running the following command:</p>

        <pre class="programlisting">
          $ git config http.postBuffer 524288000
        </pre>

        <p>And then try your <code class="literal">git push</code> again.</p>

        <p>For more details/context on Git and the HTTP post buffer, see <a href="http://stackoverflow.com/questions/2702731/git-fails-when-pushing-commit-to-github" target="_top">this Stack Overflow post</a>.</p>
      </aside>
    </div>

    <div class="sect2" title="How Do I Get a diff Between the Files I Have Locally and the Files That Are on Atlas (Regardless of the Number of Commits)?">
      <h2 class="title" id="get_a_diff">How Do I Get a diff Between the Files I Have Locally and the Files That Are on Atlas (Regardless of the Number of Commits)?</h2>

      <p>Rather than using <code class="literal">git pull</code>, use <code class="literal">git fetch</code>, like this:</p>

      <pre class="programlisting">
        $ git fetch origin
        Password:
        remote: Counting objects: 5, done.
        remote: Compressing objects: 100% (3/3), done.
        remote: Total 3 (delta 2), reused 0 (delta 0)
        Unpacking objects: 100% (3/3), done.
        From https://atlas-admin.oreilly.com/git/1230000000065
           92d4f99..e9fbbe2  master     -&gt; origin/master
      </pre>

      <p>This fetches the changes into a local branch, but does not merge them in automatically, which is what <code class="literal">pull</code> does. (In fact, as Mark Longair argues in <a href="http://longair.net/blog/2009/04/16/git-fetch-and-merge/" target="_top">git: fetch and merge, don’t pull</a>, this workflow is much better than just blindly pulling in remote changes without review.)</p>

      <p>Once you’ve fetched, you can use this command to see the files that have changed between your local copy and the remote copy:</p>

      <pre class="programlisting">
        $ git diff --name-only master..origin/master
      </pre>

      <p>This command will just give you the list of files. (If you want to see the actual differences, just leave off the “--name-only” flag). Once you’re satisfied that nothing nefarious is in there, you can then merge in the changes you just fetched using the command <code class="literal">git merge origin/master</code>, like this:</p>

      <pre class="programlisting">
        $ git merge origin/master
        Updating 92d4f99..e9fbbe2
        Fast-forward
         ch01.asciidoc |    2 +-
         1 files changed, 1 insertions(+), 1 deletions(-)
      </pre>
    </div>
  </div>
</section>

<section class="chapter" title="Chapter 7. Working with GitHub" id="working_with_github">
  <h1 class="title">Working with GitHub</h1>

  <p>Because book files in Atlas are managed with git<a id="idp6161264" class="indexterm" data-primary="git" /><a id="idp6161888" class="indexterm" data-primary="GitHub" />, you could easily sync those files with a repository on GitHub. This chapter describes that process.</p>

  <p>If you’re totally new to <a href="http://www.github.com" target="_top">GitHub</a>, the best place to start is the <a href="http://help.github.com/" target="_top">GitHub help pages</a>. They’ll walk you through what you need to know to set up an account, create a repo, set up your security credentials, and so on. Once you’ve got an account and have successfully completed the steps on <a href="http://help.github.com/mac-set-up-git/" target="_top">setting up git</a>, it’s pretty simple to move stuff back and forth between Atlas and GitHub.</p>

  <p>To put your code on GitHub, first, create a new repository. You’ll be prompted to enter a name, a description, and whether you want to make the repo public or private (available only if you have a paid account). It will look very similar to <a class="xref" href="#github_new_project" title="Figure 7-1. Create a new repository on GitHub">Figure 7-1</a>.</p>

  <figure>
    <a id="github_new_project"/>
    <img src="images/github_new_project.png" alt="A screenshot of the GitHub interface"/>
    <figcaption>Figure 7-1. Create a new repository on GitHub</figcaption>
  </figure>

  <p>Once you create a project, you’ll see a screen that lists some helpful commands for what you’ll do next. Locate the “Existing Git Repo?” section and then find the line that looks like this:</p>

  <pre class="programlisting">
    $ git remote add origin git@github.com:MakerPress/new_project.git
  </pre>

  <p>It will look something like <a class="xref" href="#github_new_repo_url" title="Figure 7-2. The new repo’s URL appears in the “Existing Git Repo?” section">Figure 7-2</a>.</p>

  <figure>
    <a id="github_new_repo_url"/>
    <img src="images/github_new_repo_url.png" alt="A screenshot from GitHub showing where a user can find the project URL"/>
    <figcaption>Figure 7-2. The new repo’s URL appears in the “Existing Git Repo?” section</figcaption>
  </figure>

  <p>Once you’ve got the line, copy the repo’s url (in our example, it’s <em>git@github.com:MakerPress/new_project.git</em>) and enter the following command in the directory where your local Atlas repo is stored. (Note that the word “origin” is the only thing we’re changing from the original command.):</p>

  <pre class="programlisting">
    $ git remote add github git@github.com:MakerPress/new_project.git
  </pre>

  <p>Once you’ve set up the new remote, you can push to it with this command:</p>

  <pre class="programlisting">
    $ git push github master
  </pre>

  <p>You can then take full advantage of all the amazing features and community available on GitHub.</p>

  <p>Conversely, if you already have a repo on GitHub that you’d like to pull into Atlas, all you have to do is clone it down and add a new remote to an Atlas repo, like this:</p>

  <pre class="programlisting">
    $ git clone git@github.com:MakerPress/new_project.git
    Cloning into new_project...
    warning: You appear to have cloned an empty repository.
    admins-MacBook-Air-2:Desktop odewahn
    $ cd new_project/
    $ git remote add atlas https://odewahn%40oreilly.com@atlas-admin.oreilly.com/git/1230000000197.git
    $ git push atlas master
    ...
  </pre>

  <p>As we continue to improve Atlas, we’ll add features to allow you to easily move projects back and forth from within the UI.</p>

  <aside class="sidebar" title="Using GitHub Wikis">
    <h5 class="sidebar-title">Using GitHub Wikis</h5>

    <p>GitHub wikis are really cool, since they store all your data as a git repo that you can clone, just like any other. If you wanted, you could write your entire book on a GitHub wiki using either AsciiDoc or Markdown (if you don’t need really complex markup) and then pull it straight into Atlas to build the project.</p>

    <p>To clone a GitHub wiki, first find the URL for the wiki’s git repo, which appears on the “Git Access” tab:</p>

    <figure>
      <img src="images/github_wiki.png" alt="Screenshot of a GitHub wiki"/>
    </figure>

    <p>Once you have the wiki’s URL, you can clone it to your local system and add a remote back to Atlas so that you can move data back and forth with ease:</p>

    <pre class="programlisting">
      $ git clone git@github.com:MakerPress/new_project.wiki.git
      Cloning into new_project.wiki...
      remote: Counting objects: 3, done.
      remote: Total 3 (delta 0), reused 0 (delta 0)
      Receiving objects: 100% (3/3), done.
      $ cd new_project.wiki/
      $ git remote add atlas https://odewahn%40oreilly.com@atlas-admin.oreilly.com/git/1230000000197.git
      $ git push atlas master
    </pre>

    <p>Note that you’d need to pull in any changes from the GitHub wiki into Atlas.</p>
  </aside>
</section>

<section class="index" title="Index" id="_index">
  <h1 class="title">Index</h1>

  <div class="indexnote"/>

  <div class="indexdiv">
    <h2>C</h2>
    <dl>
      <dt class="indexentry">collaborators</dt>
      <dd>
        <dl>
          <dt class="indexentry">inviting</dt>
          <dd><a class="indexentry xref" href="#idp64272">Working in the Atlas Wiki</a></dd>
        </dl>
      </dd>
      <dt>creating files</dt>
      <dd><a class="indexentry xref" href="#idp67424">Creating New Files</a></dd>
    </dl>
  </div>

  <div class="indexdiv">
    <h2>E</h2>
    <dl>
      <dt class="indexentry">entering a log message</dt> 
      <dd><a class="indexentry xref" href="#idp5534176">Working with AsciiDoc Text in Atlas</a></dd>
    </dl>
  </div>

  <div class="indexdiv">
    <h2>G</h2>
    <dl>
      <dt class="indexentry">git</dt> 
      <dd><a class="indexentry xref" href="#idp6015536">Using Git with Atlas</a></dd> 
      <dd><a class="indexentry xref" href="#idp6161264">Working with GitHub</a></dd>
      <dt class="indexentry">GitHub</dt> 
      <dd><a class="indexentry xref" href="#idp6161888">Working with GitHub</a></dd>
      <dt class="indexentry">gravatar</dt>
      <dd><a class="indexentry xref" href="#idp900640">Write How You Want</a></dd>
    </dl>
  </div>

  <div class="indexdiv">
    <h2>I</h2>
    <dl>
      <dt class="indexentry">invitation</dt> 
      <dd><a class="indexentry xref" href="#idp2843056">How It Works</a></dd>
    </dl>
  </div>

  <div class="indexdiv">
    <h2>V</h2>
    <dl>
      <dt class="indexentry">video</dt>
      <dd>
        <dl>
          <dt class="indexentry">introduction to Atlas</dt> 
          <dd><a class="indexentry xref" href="#idp4299824">Join the Publishing Revolution</a></dd>
        </dl>
      </dd>
    </dl>
  </div>

  <div class="indexdiv">
    <h2>W</h2>
    <dl>
      <dt class="indexentry">wiki interface</dt>
      <dd><a class="indexentry xref" href="#idp897328">Write How You Want</a></dd>
    </dl>
  </div>

</section>

</body>
</html>
